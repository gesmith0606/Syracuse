/*! Copyright 2003-2018 Rustici Software, LLC All Rights Reserved. Rustici-Engine 20.1.1 2022-01-25T00:45:13+0000 4440405 ltiDispatch */

window.getQueryStringParameter=function(t,e){for(var n,r=function(t){var e;if(!t)return window.location.search.substring(1);if((e=t.split("?")).length<2)return"";if(2<e.length)throw new Error("Malformed URL: "+t);return e[0]}(e).split("&"),o=0;o<r.length;o+=1)if((n=r[o].split("="))[0]===t)return decodeURIComponent(n[1])},window.LtiState=function(){function i(){this.score=null,this.status=t[0][1]}var t=[["unknown",window.LESSON_STATUS_NOT_ATTEMPTED],["incomplete",window.LESSON_STATUS_INCOMPLETE],["completed",window.LESSON_STATUS_COMPLETED],["failed",window.LESSON_STATUS_FAILED],["passed",window.LESSON_STATUS_PASSED]];return i.prototype={scoreIsKnown:function(){return null!==this.score},getScore:function(){return this.score},setScore:function(t){this.score=t},getStatus:function(){return this.status},getStatusValue:function(){var e=this.status;return t.filter(function(t){return t[1]===e})[0][0]}},t.forEach(function(t){var e,n=t[0],r=t[1],o=(e=n).charAt(0).toUpperCase()+e.slice(1);i.prototype["setStatus"+o]=function(){this.status=r},i.prototype["isStatus"+o]=function(){return this.status===r}}),i}(),window.setupDriverForLti=function(n){var t=getQueryStringParameter("redirectOnExitUrl"),r=new LtiState,o=getQueryStringParameter("ltiOutcomeUrl");t&&(n.EXIT_TARGET=t),n.strLMSStandard="NONE",n.NONE_GetStudentID=function(){var t=getQueryStringParameter("studentId");return n.WriteToDebug("In LTI GetStudentID, returning "+t),t},n.NONE_GetStudentName=function(){var t=getQueryStringParameter("studentName").replace(/\+/g," ");return n.WriteToDebug("In LTI GetStudentName, returning "+t),t},n.NONE_GetScore=function(){var t=r.getScore();return n.WriteToDebug("In LTI GetScore, returning "+t),t},n.NONE_SetScore=function(t){var e;return n.WriteToDebug("In LTI SetScore, Returning true"),e=n.RoundToPrecision(t/100,7),r.setScore(e),!0},n.NONE_ResetStatus=function(){return n.WriteToDebug("In LTI ResetStatus"),r.setStatusUnknown(),!0},n.NONE_SetFailed=function(){return n.WriteToDebug("In LTI SetFailed"),r.setStatusFailed(),!0},n.NONE_SetPassed=function(){return n.WriteToDebug("In LTI SetPassed"),r.setStatusPassed(),!0},n.NONE_SetCompleted=function(){return n.WriteToDebug("In LTI SetCompleted, Returning true"),r.setStatusCompleted(),!0},n.NONE_GetStatus=function(){var t=r.getStatus();return n.WriteToDebug("In LTI GetStatus, Returning "+t),t},n.NONE_Finish=function(){return n.WriteToDebug("In LTI Finish, Returning true"),n.CommitData(),!0},o&&(n.NONE_CommitData=function(){var t,e=new XMLHttpRequest;if(r.scoreIsKnown())t=r.getScore(),n.WriteToDebug("In LTI CommitData, score set, reporting "+t);else if(r.isStatusPassed())n.WriteToDebug("In LTI CommitData, no score, passed, reporting 1"),t=1;else if(r.isStatusFailed())n.WriteToDebug("In LTI CommitData, no score, failed, reporting 0"),t=0;else{if(!r.isStatusCompleted())return n.WriteToDebug("In LTI CommitData, no score or status set, nothing to commit."),!0;n.WriteToDebug("In LTI CommitData, no score, no success status, complete, reporting 1"),t=1}return e.open("POST",o.replace("_SCORE_",t).replace("_STATE_",r.getStatusValue()),!1),e.send(null),200===e.status||(alert("Failed to report score to 3rd-party LMS (data may have been lost)"),!1)})},window.setupDispatchForLti=function(){var t,n=window,r=window,e=window,o=getQueryStringParameter("config"),i=JSON.parse(o);r.DispatchRoot=(t=i.dispatchRoot,"https:"===window.location.protocol?t.replace("http:","https:"):t.replace("https:","http:")),r.DispatchVersion=i.dispatchVersion,r.ContentURL=i.contentUrl,r.PreLaunchConfigurationURL=i.preLaunchConfigurationUrl,r.IsLtiDispatch=!0,e.DispatchStart=function(){var t=void 0!==n.Start,e=void 0!==r.LoadContent;t&&e?(setupDriverForLti(n),void 0!==n.ShowDebugWindow&&n.DebugMode&&n.ShowDebugWindow(),n.Start()):setTimeout(r.DispatchStart,500)},e.DispatchUnload=function(){n.WriteToDebug("Unloading from DispatchUnload"),n.Unload(),n.WriteToDebug("Unloaded from DispatchUnload")}};
//# sourceMappingURL=ltiDispatch-min.js.map