/*! Copyright 2003-2018 Rustici Software, LLC All Rights Reserved. Rustici-Engine 20.1.1 2021-05-07T15:47:27-0500 ff3c328984f82c550f1e974ab2938b476576c4da client.loader */

!function(e,t){"object"==typeof exports?module.exports=exports=t():"function"==typeof define&&define.amd?define([],t):e.CryptoJS=t()}(this,function(){var e=e||function(e,t){var n=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),r={},o=r.lib={},i=o.Base={extend:function(e){var t=n(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},a=o.WordArray=i.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=void 0!=t?t:4*e.length},toString:function(e){return(e||c).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,o=e.sigBytes;if(this.clamp(),r%4)for(a=0;a<o;a++){var i=n[a>>>2]>>>24-a%4*8&255;t[r+a>>>2]|=i<<24-(r+a)%4*8}else for(var a=0;a<o;a+=4)t[r+a>>>2]=n[a>>>2];return this.sigBytes+=o,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n,r=[],o=0;o<t;o+=4){var i=function(t){var t=t,n=987654321,r=4294967295;return function(){var o=((n=36969*(65535&n)+(n>>16)&r)<<16)+(t=18e3*(65535&t)+(t>>16)&r)&r;return o/=4294967296,(o+=.5)*(e.random()>.5?1:-1)}}(4294967296*(n||e.random()));n=987654071*i(),r.push(4294967296*i()|0)}return new a.init(r,t)}}),s=r.enc={},c=s.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o++){var i=t[o>>>2]>>>24-o%4*8&255;r.push((i>>>4).toString(16)),r.push((15&i).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new a.init(n,t/2)}},d=s.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o++){var i=t[o>>>2]>>>24-o%4*8&255;r.push(String.fromCharCode(i))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new a.init(n,t)}},l=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(d.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return d.parse(unescape(encodeURIComponent(e)))}},u=o.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,o=n.sigBytes,i=this.blockSize,s=o/(4*i),c=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*i,d=e.min(4*c,o);if(c){for(var l=0;l<c;l+=i)this._doProcessBlock(r,l);var u=r.splice(0,c);n.sigBytes-=d}return new a.init(u,d)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),p=(o.Hasher=u.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){u.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new p.HMAC.init(e,n).finalize(t)}}}),r.algo={});return r}(Math);return e}),function(e,t){"object"==typeof exports?module.exports=exports=t(require("./core")):"function"==typeof define&&define.amd?define(["./core"],t):t(e.CryptoJS)}(this,function(e){return function(t){var n=e,r=n.lib,o=r.Base,i=r.WordArray,a=n.x64={};a.Word=o.extend({init:function(e,t){this.high=e,this.low=t}}),a.WordArray=o.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=void 0!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,n=[],r=0;r<t;r++){var o=e[r];n.push(o.high),n.push(o.low)}return i.create(n,this.sigBytes)},clone:function(){for(var e=o.clone.call(this),t=e.words=this.words.slice(0),n=t.length,r=0;r<n;r++)t[r]=t[r].clone();return e}})}(),e}),function(e,t){"object"==typeof exports?module.exports=exports=t(require("./core")):"function"==typeof define&&define.amd?define(["./core"],t):t(e.CryptoJS)}(this,function(e){return function(){if("function"==typeof ArrayBuffer){var t=e.lib.WordArray,n=t.init;(t.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var t=e.byteLength,r=[],o=0;o<t;o++)r[o>>>2]|=e[o]<<24-o%4*8;n.call(this,r,t)}else n.apply(this,arguments)}).prototype=t}}(),e.lib.WordArray}),function(e,t){"object"==typeof exports?module.exports=exports=t(require("./core")):"function"==typeof define&&define.amd?define(["./core"],t):t(e.CryptoJS)}(this,function(e){return function(t){var n=e,r=n.lib,o=r.WordArray,i=r.Hasher,a=n.algo,s=[],c=[];!function(){function e(e){return 4294967296*(e-(0|e))|0}for(var n=2,r=0;r<64;)(function(e){for(var n=t.sqrt(e),r=2;r<=n;r++)if(!(e%r))return!1;return!0})(n)&&(r<8&&(s[r]=e(t.pow(n,.5))),c[r]=e(t.pow(n,1/3)),r++),n++}();var d=[],l=a.SHA256=i.extend({_doReset:function(){this._hash=new o.init(s.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],o=n[1],i=n[2],a=n[3],s=n[4],l=n[5],u=n[6],p=n[7],h=0;h<64;h++){if(h<16)d[h]=0|e[t+h];else{var f=d[h-15],m=(f<<25|f>>>7)^(f<<14|f>>>18)^f>>>3,y=d[h-2],g=(y<<15|y>>>17)^(y<<13|y>>>19)^y>>>10;d[h]=m+d[h-7]+g+d[h-16]}var R=r&o^r&i^o&i,_=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),v=p+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+(s&l^~s&u)+c[h]+d[h];p=u,u=l,l=s,s=a+v|0,a=i,i=o,o=r,r=v+(_+R)|0}n[0]=n[0]+r|0,n[1]=n[1]+o|0,n[2]=n[2]+i|0,n[3]=n[3]+a|0,n[4]=n[4]+s|0,n[5]=n[5]+l|0,n[6]=n[6]+u|0,n[7]=n[7]+p|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,o=8*e.sigBytes;return n[o>>>5]|=128<<24-o%32,n[14+(o+64>>>9<<4)]=t.floor(r/4294967296),n[15+(o+64>>>9<<4)]=r,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});n.SHA256=i._createHelper(l),n.HmacSHA256=i._createHmacHelper(l)}(Math),e.SHA256}),function(){var e=0;if(void 0!==window.ContentURL&&window.ContentURL.indexOf("EngineWebServices//api")>-1&&void 0!==window.document.scripts)for(;e<window.document.scripts.length;e+=1)void 0!==window.document.scripts[e]&&void 0!==window.document.scripts[e].attributes.src&&window.document.scripts[e].attributes.src.value.indexOf("scormdriver.js")>-1&&(window.document.scripts[e].onload=function(){window.strLMSStandard="SCORM"});function t(e){var t,n=e.protocol,r=e.host,o=e.pathname.split("/");return o.pop(),t=o.join("/"),[n,"//",r,t].join("")}function n(e){var t,n=[];if(e.indexOf(",")>=0){if(1===(n=e.split(",")).length)return n[0].length<1?["Unknown","Learner"]:[n[0].replace(/\s+/g,""),n[0].replace(/\s+/g,"")];if(0===n.length)return["Unknown","Learner"]}else e.indexOf(" ")>=0?(t=e.indexOf(" "),n.push(e.substr(t+1)),n.push(e.substr(0,t))):n=[e,"Learner"];return n[0]=n[0].replace(/\s+/g,""),n[1]=n[1].replace(/\s+/g,""),""===n[0]&&(n[0]="Unknown"),""===n[1]&&(n[1]="Learner"),n}function r(e,t){return e.replace(/{{([^}]+)}}/g,function(e,n){return void 0!==t[n]?t[n]:e})}function o(e){for(var t,n={},r=/([^&=]+)=?([^&#]*)/g;null!==(t=r.exec(e));)n[t[1]]=decodeURIComponent(t[2]);return n}function i(e){var t,n="";for(t in e)e.hasOwnProperty(t)&&(""!==n&&(n+="&"),n+=t+"="+encodeURIComponent(e[t]));return n}function a(e,t){var n=e,r=n.split("?"),a=o(r[1]),s=r[0].split("/"),c=s.slice(0,s.length-2).join("/");return delete a.dispatchid,delete a.launchsecret,a.launchtoken=t,n=c+"?"+i(a)}function s(e){var n,o,i,s,c=/[^-\w.]+/,d=e.contentUrl,l=e.dispatchRoot+"Closer.html",u=e.defaultCssUrl,p=e.learnerId,h=(new Date).toISOString().slice(0,10);"https:"===e.currentLocation.protocol?(d=d.replace("http:","https:"),l=l.replace("http:","https:"),void 0!==u&&(u=u.replace("http:","https:"))):(d=d.replace("https:","http:"),l=l.replace("https:","http:"),void 0!==u&&(u=u.replace("https:","http:"))),e.options=e.options||{},void 0===e.options.learnerIdTemplate&&(e.options.learnerIdTemplate="{{learnerId}}"),void 0===e.options.learnerFirstNameTemplate&&(e.options.learnerFirstNameTemplate="{{learnerFirstName}}"),void 0===e.options.learnerLastNameTemplate&&(e.options.learnerLastNameTemplate="{{learnerLastName}}"),void 0!==e.options.launchToken&&(d=a(d,e.options.launchToken)),p=r(e.options.learnerIdTemplate,{learnerId:p,learnerIdHash:CryptoJS.SHA256(p).toString(CryptoJS.enc.Hex)}),o=r(e.options.learnerLastNameTemplate,{learnerLastName:e.learnerNameParts[0],learnerLastNameHash:CryptoJS.SHA256(e.learnerNameParts[0]).toString(CryptoJS.enc.Hex)}),n=r(e.options.learnerFirstNameTemplate,{learnerFirstName:e.learnerNameParts[1],learnerFirstNameHash:CryptoJS.SHA256(e.learnerNameParts[1]).toString(CryptoJS.enc.Hex)}),p=p.replace(/[\\/]/g,"_"),d=d.replace("LEARNER_ID",encodeURIComponent(p)),d=d.replace("LEARNER_LNAME",encodeURIComponent(o)),d=d.replace("LEARNER_FNAME",encodeURIComponent(n)),d=d.replace("REFERRING_URL",encodeURIComponent(e.currentLocation)),i=t(e.currentLocation),d=d.replace("PIPE_URL",encodeURIComponent(i)),d=d.replace("REDIRECT_URL",encodeURIComponent(l)),void 0!==u&&(d=d.replace("CSS_URL",encodeURIComponent(u))),d=e.isLti?d.replace("_REGISTRATION_ARGUMENT","&regid=_lti_"):e.entryMode===ENTRY_FIRST_TIME?d.replace("_REGISTRATION_ARGUMENT","&regid=_new_"):null===e.regId||""===e.regId||c.test(e.regId)?void 0!==e.dispatchVersion&&e.dispatchVersion>0?d.replace("_REGISTRATION_ARGUMENT","&regid=_none_"):d.replace("_REGISTRATION_ARGUMENT",""):d.replace("_REGISTRATION_ARGUMENT","&regid="+encodeURIComponent(e.regId)),(s=document.createElement("script")).async=!0,s.src=e.dispatchRoot+"dispatch.client.driver.js?cache=ff3c328984f82c550f1e974ab2938b476576c4da-"+h,s.onload=function(){s.readyState&&!/loaded|complete/.test(s.readyState)||(clearTimeout(e.timeoutId),s.parentNode.removeChild(s),s=null,document.getElementById("dispatch_loading_frame").src=e.dispatchRoot+"loading.html",document.getElementById("dispatch_content_frame").src=e.dispatchRoot+"DispatchHost.html?cache=ff3c328984f82c550f1e974ab2938b476576c4da-"+h+"&URL="+encodeURIComponent(d)+"#"+i)},document.getElementsByTagName("head")[0].appendChild(s)}function c(e,t){var n,r,a,c,d=e,l=d.split("?"),u=d.split("/"),p=u.length,h=!1;1===l.length&&(h=!0,a=u[p-1],r=u[p-2],d=u.slice(0,p-2).join("/")),2===l.length&&void 0!==(n=o(l[1])).dispatchid&&void 0!==n.launchsecret&&(h=!0,r=n.dispatchid||n.contentId,a=n.launchsecret||n.secret,delete n.dispatchid,delete n.launchsecret,delete n.contentId,delete n.secret,d=l[0]+"?"+i(n)),(c=new XMLHttpRequest).open("GET",d,!0),h&&(c.setRequestHeader("EngineDispatchId",r),c.setRequestHeader("EngineDispatchLaunchSecret",a)),c.onreadystatechange=function(){if(4===c.readyState){if(200===c.status){try{t.options=JSON.parse(c.responseText)}catch(e){return void alert("Failed to parse response from pre-launch configuration URL as JSON, the launch has been halted. ("+e+")")}return void s(t)}alert("Unrecognized HTTP status returned from pre-launch configuration URL ("+c.status+"), the launch has been halted.")}};try{c.send()}catch(e){}}function d(){var e,t,n,r,o,i,a,s=document.getElementById("dispatch_frameset");if(null!==s&&"FRAMESET"===s.tagName){for((e=document.createElement("body")).onload=s.onload,e.onunload=s.onunload;s.firstElementChild;)"dispatch_aicc_comm"===(t=s.firstElementChild).id&&(o=!0,i=s.firstElementChild.contentDocument.body.onunload,a=s.firstElementChild.contentDocument.body.onbeforeunload,s.firstElementChild.contentDocument.body.onbeforeunload=null,s.firstElementChild.contentDocument.body.onunload=null),s.removeChild(s.firstElementChild),(n=document.createElement("iframe")).id=n.name=t.id,"dispatch_loading_frame"!==n.id&&(n.style.display="none"),n.src=t.src,o&&(o=!1,n.onload=function(){this.contentDocument.body.onunload=i,this.contentDocument.body.onbeforeunload=a,window.AICCComm=this.contentWindow}),e.appendChild(n);s.parentNode.replaceChild(e,s),document.getElementById("dispatch_content_frame").allow="autoplay",document.getElementById("dispatch_content_frame").setAttribute("allowfullscreen",""),document.getElementById("dispatch_content_frame").setAttribute("mozallowfullscreen",""),document.getElementById("dispatch_content_frame").setAttribute("webkitallowfullscreen",""),(r=document.createElement("style")).innerText="html { height: 100%; overflow-y: hidden; } iframe, body { height:100%; width:100%; border:none; margin: 0px; }",document.head.appendChild(r)}}window.LoadContent=function(){var e,t={currentLocation:window.location,contentUrl:ContentURL,dispatchRoot:DispatchRoot,dispatchVersion:DispatchVersion,isLti:!1};return ContentURL.indexOf("EngineWebServices//api")>-1?(e=ContentURL.replace("EngineWebServices//api?method=rustici.dispatch.launch","ScormEngineInterface/dispatch/DispatchRequest.jsp?methodName=PreLaunchConfiguration&isLws=true").replace("learnerid=LEARNER_ID&fname=LEARNER_FNAME&lname=LEARNER_LNAME&referringurl=REFERRING_URL&pipeurl=PIPE_URL&redirecturl=REDIRECT_URL&cssurl=CSS_URL",""),t.contentUrl=ContentURL.replace("EngineWebServices//api?method=rustici.dispatch.launch","ScormEngineInterface/dispatch/DispatchRequest.jsp?methodName=Launch&isLws=true")):"undefined"!=typeof PreLaunchConfigurationURL&&""!==PreLaunchConfigurationURL&&(e=PreLaunchConfigurationURL),d(),window.scormdriver_content=window.dispatch_content_frame,""===t.contentUrl?(alert("ERROR - no ContentURL specified"),!1):(t.learnerId=objLMS.GetStudentID(),null===t.learnerId||0===t.learnerId.length?(alert("The host LMS for this dispatch returned an empty learner id. Since the learner id is required for dispatch, the launch has been halted."),!1):(t.learnerNameParts=n(objLMS.GetStudentName()),t.entryMode=objLMS.GetEntryMode(),"undefined"!=typeof IsLtiDispatch&&IsLtiDispatch?t.isLti=!0:t.entryMode!==ENTRY_FIRST_TIME&&(t.regId=objLMS.GetDataChunk()),"undefined"!=typeof DefaultCssUrl&&(t.cssUrl=DefaultCssUrl),t.timeoutId=setTimeout(function(){alert("Failed to establish communication between LMSs (client.driver hasn't loaded)")},3e4),void(void 0===e||""===e?s(t):c(e,t))))};var l=function(){objLMS&&objLMS.GetStatus()===LESSON_STATUS_NOT_ATTEMPTED?objLMS.ResetStatus():objLMS||setTimeout(l,100)};document.body?document.body.onload=function(){DispatchStart(),l()}:l()}();
//# sourceMappingURL=dispatch.client.loader.js.map